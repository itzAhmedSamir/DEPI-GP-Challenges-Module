import{a as j,b as D,c as N,d as v}from"./chunk-5BEIWVDZ.js";import{A as h,C as w,E,F as k,G as F,K as L,f as I,g as u,h as x,i as _,j as l,k as p,l as O,m as d,o as c,p as i,q as t,r as S,s as b,t as y,u as m,v as P,w as M,y as r,z as g}from"./chunk-XUJENBMA.js";var f=class n{constructor(a,e){this.storageService=a;this.notificationService=e}reminders=["A small step every day makes big progress.","Keep going, your future self will thank you.","Remember to take care of yourself today.","Don't forget to check today's challenge!"];checkAndShowReminder(){if(this.storageService.getChallenges().length===0||sessionStorage.getItem("reminderShown")==="true")return;let e=parseInt(localStorage.getItem("reminderIndex")||"0",10);(isNaN(e)||e<0||e>=this.reminders.length)&&(e=0);let o=this.reminders[e];this.notificationService.showReminder(o);let s=(e+1)%this.reminders.length;localStorage.setItem("reminderIndex",s.toString()),sessionStorage.setItem("reminderShown","true")}static \u0275fac=function(e){return new(e||n)(u(D),u(v))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function V(n,a){n&1&&(i(0,"div",7),r(1," Loading challenges... "),t())}function $(n,a){n&1&&(i(0,"div",7),r(1," \u{1F389} Wow! You've joined all available challenges! Keep up the great work! "),t())}function U(n,a){if(n&1){let e=b();i(0,"div",10)(1,"div",11),r(2),t(),i(3,"h3",12),r(4),t(),i(5,"p",13),r(6),t(),i(7,"div",14)(8,"span",15),r(9),t(),i(10,"span",15),r(11),t()(),i(12,"button",16),y("click",function(){let s=x(e).$implicit,C=m(2);return _(C.joinChallenge(s.id))}),r(13," Join Challenge "),t()()}if(n&2){let e=a.$implicit;l(2),g(e.icon),l(2),g(e.title),l(2),g(e.description),l(3),h("\u23F1\uFE0F ",e.durationDays," days"),l(2),h("\u2B50 ",e.points," pts")}}function J(n,a){if(n&1&&(i(0,"div",8),d(1,U,14,5,"div",9),t()),n&2){let e=m();l(),c("ngForOf",e.availableChallenges)}}function Y(n,a){n&1&&(i(0,"div",7),r(1," No active challenges yet. Join a challenge above to get started! "),t())}function B(n,a){n&1&&(i(0,"span"),r(1," \u{1F3C6}"),t())}function K(n,a){if(n&1){let e=b();i(0,"div",18)(1,"div",11),r(2),t(),i(3,"h3",12),r(4),t(),i(5,"p",13),r(6),t(),i(7,"div",19)(8,"div",20),S(9,"div",21),t(),i(10,"div",22),r(11),d(12,B,2,0,"span",23),t()(),i(13,"div",14)(14,"span",15),r(15),t(),i(16,"span",15),r(17),t()(),i(18,"button",16),y("click",function(){let s=x(e).$implicit,C=m(2);return _(C.viewChallengeDetails(s.id))}),r(19," View Progress "),t()()}if(n&2){let e=a.$implicit,o=m(2);M("completed-card",o.isChallengeCompleted(e)),l(2),g(e.icon),l(2),g(e.title),l(2),g(e.description),l(3),P("width",o.getChallengeStats(e).percentage,"%"),l(2),w(" ",o.getChallengeStats(e).completed,"/",o.getChallengeStats(e).total," days completed (",o.getChallengeStats(e).percentage,"%) "),l(),c("ngIf",o.isChallengeCompleted(e)),l(3),h("\u23F1\uFE0F ",e.durationDays," days"),l(2),h("\u2B50 ",e.points," pts")}}function H(n,a){if(n&1&&(i(0,"div",8),d(1,K,20,13,"div",17),t()),n&2){let e=m();l(),c("ngForOf",e.activeChallenges)}}var T=class n{constructor(a,e,o,s){this.challengeService=a;this.notificationService=e;this.reminderService=o;this.router=s}availableChallenges=[];activeChallenges=[];isLoading=!0;ngOnInit(){this.loadChallenges(),this.reminderService.checkAndShowReminder()}loadChallenges(){this.isLoading=!0,this.availableChallenges=this.challengeService.getAvailableChallenges(),this.activeChallenges=this.challengeService.getActiveChallenges(),this.isLoading=!1}joinChallenge(a){let e=this.availableChallenges.find(s=>s.id===a);if(!e)return;this.challengeService.joinChallenge(a)?this.notificationService.success("Challenge Joined!",`You've successfully joined: ${e.title}. Start tracking your progress today! \u{1F4AA}`).then(()=>{this.loadChallenges()}):this.notificationService.error("Error","Failed to join challenge. Please try again.")}viewChallengeDetails(a){this.router.navigate(["/challenge",a])}getChallengeStats(a){return this.challengeService.getChallengeStats(a)}isChallengeCompleted(a){return a.progress.every(e=>e===!0)}static \u0275fac=function(e){return new(e||n)(p(N),p(v),p(f),p(L))};static \u0275cmp=O({type:n,selectors:[["app-challenges-list"]],decls:18,vars:5,consts:[[1,"challenges-section"],[1,"container"],[1,"section-title"],[1,"section-subtitle"],["class","empty-message",4,"ngIf"],["class","challenges-grid",4,"ngIf"],[1,"active-challenges-section"],[1,"empty-message"],[1,"challenges-grid"],["class","challenge-card",4,"ngFor","ngForOf"],[1,"challenge-card"],[1,"challenge-icon"],[1,"challenge-title"],[1,"challenge-description"],[1,"challenge-meta"],[1,"meta-item"],[1,"btn-primary",3,"click"],["class","challenge-card active-card",3,"completed-card",4,"ngFor","ngForOf"],[1,"challenge-card","active-card"],[1,"challenge-progress-mini"],[1,"progress-mini-bar"],[1,"progress-mini-fill"],[1,"progress-mini-text"],[4,"ngIf"]],template:function(e,o){e&1&&(S(0,"app-header"),i(1,"section",0)(2,"div",1)(3,"h3",2),r(4,"\u{1F3AF} Available Challenges"),t(),i(5,"p",3),r(6,"Choose challenges that fit your goals and start building healthy habits"),t(),d(7,V,2,0,"div",4)(8,$,2,0,"div",4)(9,J,2,1,"div",5),t()(),i(10,"section",6)(11,"div",1)(12,"h3",2),r(13,"My Active Challenges"),t(),i(14,"p",3),r(15,"Track your progress and stay motivated"),t(),d(16,Y,2,0,"div",4)(17,H,2,1,"div",5),t()()),e&2&&(l(7),c("ngIf",o.isLoading),l(),c("ngIf",!o.isLoading&&o.availableChallenges.length===0),l(),c("ngIf",!o.isLoading&&o.availableChallenges.length>0),l(7),c("ngIf",o.activeChallenges.length===0),l(),c("ngIf",o.activeChallenges.length>0))},dependencies:[F,E,k,j],styles:[".challenges-section[_ngcontent-%COMP%]{padding:120px 0 3rem}.active-challenges-section[_ngcontent-%COMP%]{padding:3rem 0;background:linear-gradient(180deg,transparent 0%,rgba(25,71,43,.1) 100%)}.challenges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;max-width:1200px;margin:0 auto}.challenge-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--dark-bg) 0%,var(--secondary-bg) 100%);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;transition:all .3s ease;cursor:pointer;animation:fadeIn .5s ease;display:flex;flex-direction:column}.challenge-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 24px #19492c66;border-color:var(--success-color)}.challenge-card.active-card[_ngcontent-%COMP%]{border:2px solid var(--success-color);background:linear-gradient(135deg,var(--accent-green) 0%,var(--secondary-bg) 100%)}.challenge-card.completed-card[_ngcontent-%COMP%]{border:2px solid var(--warning-color);background:linear-gradient(135deg,var(--dark-bg) 0%,rgba(246,173,85,.1) 100%)}.challenge-icon[_ngcontent-%COMP%]{font-size:3rem;text-align:center;margin-bottom:1rem}.challenge-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.5rem;color:var(--text-primary);min-height:2.5rem}.challenge-description[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:1rem;font-size:.9rem;flex-grow:1}.challenge-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-top:1rem;border-top:1px solid var(--border-color)}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.3rem;font-size:.85rem;color:var(--text-secondary)}.challenge-progress-mini[_ngcontent-%COMP%]{margin-bottom:1rem}.progress-mini-bar[_ngcontent-%COMP%]{width:100%;height:6px;background-color:#ffffff1a;border-radius:3px;overflow:hidden;margin-bottom:.5rem}.progress-mini-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--success-color) 0%,#38a169 100%);transition:width .5s ease}.progress-mini-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);text-align:center}@media (max-width: 1024px){.challenges-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1.5rem}}@media (max-width: 768px){.challenges-section[_ngcontent-%COMP%]{padding-top:100px}.challenges-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1.5rem}}@media (max-width: 480px){.challenges-section[_ngcontent-%COMP%]{padding-top:90px;padding-bottom:2rem}.active-challenges-section[_ngcontent-%COMP%]{padding:2rem 0}.challenges-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.challenge-card[_ngcontent-%COMP%]{padding:1.25rem}.challenge-icon[_ngcontent-%COMP%]{font-size:2.5rem}.challenge-title[_ngcontent-%COMP%]{font-size:1rem;min-height:auto}.challenge-description[_ngcontent-%COMP%]{font-size:.85rem}.meta-item[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 360px){.challenge-card[_ngcontent-%COMP%]{padding:1rem}.challenge-icon[_ngcontent-%COMP%]{font-size:2.2rem}}"]})};export{T as ChallengesListComponent};
